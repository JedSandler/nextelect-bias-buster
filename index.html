<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>NextElect ‚Äî Issue of the Week (Multi-Issue)</title>
  <style>
    /* ===== Theme / Base ===== */
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    :root{
      --bg:#3c3f46;
      --fg:#f2f2f2;
      --muted:#d5d5d5;
      --tile:#f7f7f7;
      --tile-border:#dcdcdc;
      --green-bg:#d4edda;
      --green-fg:#155724;
      --red-bg:#f8d7da;
      --red-fg:#721c24;
      --accent:#e6e6e6;
      --card:#2b2f36;
      --card-border:#3a3e47;
      --link-modal:#cfe2ff; /* lighter (Sources & Links modal / final) */
      --link-bias:#aecdff;  /* slightly darker (Bias Buster only) */
    }
    body{
      font-family: Verdana, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--fg);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    .hidden{display:none!important}

    .center{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:12px;
      overflow:hidden;
    }

    .screen{
      width:100%;
      max-width:1020px;
      margin:0 auto;
      max-height:100%;
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }

    /* Branding row */
    .brand{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:.8rem;
      margin:0 0 12px;
      flex-shrink:0;
      text-align:center;
    }
    .brand img{height:64px}
    .brand .logo{font-size:2.2rem;}

    /* Card shell */
    .card{
      background:var(--card);
      border:1px solid var(--card-border);
      border-radius:14px;
      padding:1rem;
      box-shadow:0 12px 30px rgba(0,0,0,.25);
      display:flex;
      flex-direction:column;
      align-items:center;
      text-align:center;
      flex-shrink:0;
      max-height:calc(100vh - 150px);
      overflow:auto;
    }
    .section{margin-top:12px}

    h1,h2,h3{line-height:1.2}
    .muted{color:var(--muted)}
    .left-text{text-align:left}
    .center-text{text-align:center}

    /* Buttons */
    button{font-family:inherit}
    .btn{
      background:#34363d;
      color:var(--fg);
      padding:.8rem 1.4rem;
      font-size:1rem;
      border:1px solid #474a53;
      border-radius:10px;
      cursor:pointer;
      transition:background .2s,transform .08s;
    }
    .btn:hover{
      background:#3b3e46;
      transform:translateY(-1px);
    }
    .btn.small{
      padding:.6rem 1rem;
      font-size:.95rem;
    }
    .btn-row{
      display:flex;
      gap:.6rem;
      flex-wrap:wrap;
      justify-content:center;
      margin-top:.8rem;
    }

    /* Issue choice buttons on Home */
    .issue-grid{
      margin-top:.9rem;
      display:flex;
      flex-wrap:wrap;
      gap:.75rem;
      justify-content:center;
      width:100%;
      max-width:780px;
    }
    .issue-card{
      background:#34363d;
      border:1px solid #474a53;
      border-radius:12px;
      padding:.8rem .95rem;
      min-width:220px;
      max-width:260px;
      text-align:left;
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.35);
      transition:background .18s, transform .08s, box-shadow .18s;
      font-size:.95rem;
      line-height:1.35;
    }
    .issue-card:hover{
      background:#3b3e46;
      transform:translateY(-1px);
      box-shadow:0 6px 16px rgba(0,0,0,.4);
    }
    .issue-card-title{
      font-weight:600;
      margin-bottom:.15rem;
      color:#fff;
    }
    .issue-card-date{
      font-size:.8rem;
      color:#bfc4cf;
      margin-bottom:.25rem;
    }
    .issue-card-desc{
      font-size:.9rem;
      color:#e3e6ee;
    }

    /* Floating Sources button (Final only) */
    .side-fab{
      position:fixed;
      right:18px;
      bottom:18px;
      width:52px;
      height:52px;
      border-radius:50%;
      background:#34363d;
      color:var(--fg);
      border:1px solid #474a53;
      box-shadow:0 6px 16px rgba(0,0,0,.35);
      cursor:pointer;
      font-size:22px;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:40;
    }
    .side-fab:hover{background:#3b3e46}

    /* Modal */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.55);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:50;
    }
    .modal-card{
      background:var(--card);
      color:var(--fg);
      border:1px solid var(--card-border);
      border-radius:14px;
      width:min(96%, 720px);
      padding:1rem;
      box-shadow:0 12px 30px rgba(0,0,0,.35);
    }
    .modal-card h3{
      font-size:1.2rem;
      margin-bottom:.4rem;
    }
    .modal-card .close-x{
      float:right;
      background:transparent;
      border:1px solid #4a4f58;
      color:#cfd6df;
      border-radius:6px;
      padding:.25rem .45rem;
      cursor:pointer;
    }
    .modal-card .close-x:hover{background:#3b3e46}
    .links-list a,
    .src-row a{
      color:var(--link-modal);
      text-decoration:underline;
    }
    .src-row{
      margin:.35rem 0;
    }
    .src-row small{
      color:#cfd6df;
    }

    /* ===== HOME ===== */
    .home-title{
      font-size:1.35rem;
      margin:8px 0 6px;
    }
    ol.instructions{
      margin:.6rem auto 0;
      max-width:680px;
      text-align:left;
      color:#e9eef7;
      line-height:1.45;
      padding-left:1.1rem;
      font-size:1rem;
    }
    ol.instructions li{
      margin:.3rem 0;
    }

    /* ===== SUMMARY LAYOUT (Part 1) ===== */
    #summary.card{
      flex-direction:row;
      align-items:flex-start;
      justify-content:space-between;
      text-align:left;
      padding:1rem 1.25rem;
      gap:1rem;
      max-height:calc(100vh - 150px);
      overflow:hidden;
    }

    .summary-left{
      flex:1;
      min-width:0;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      align-items:flex-start;
      max-height:100%;
      overflow:auto;
    }

    .summary-header-row{
      display:flex;
      align-items:center;
      gap:.5rem;
      flex-shrink:0;
      margin-bottom:.5rem;
    }
    .summary-header-row img{
      height:32px;
    }
    .summary-header-row h2{
      font-size:1.2rem;
      line-height:1.2;
      margin:0;
      color:#fff;
      font-weight:600;
    }

    .summary-title{
      font-size:1.2rem;
      color:#e9eef7;
      margin:0 0 .5rem 0;
      font-weight:600;
      max-width:100%;
      line-height:1.3;
    }

    .summary-bullets{
      line-height:1.5;
      font-size:1rem;
      color:#f2f2f2;
      max-width:100%;
      overflow:hidden;
    }
    .summary-bullets li{
      margin:.4rem 0;
    }

    .summary-cta{
      margin-top:.8rem;
      flex-shrink:0;
    }

    .summary-divider{
      width:1px;
      background:#4a4f58;
      align-self:stretch;
      flex-shrink:0;
    }

    .summary-right{
      flex-shrink:0;
      width:360px;
      max-width:360px;
      display:flex;
      flex-direction:column;
      align-items:center;
      text-align:left;
      gap:.6rem;
      max-height:100%;
      overflow:hidden;
    }

    .top-image-wrap{
      width:100%;
      max-width:360px;
      border-radius:10px;
      overflow:hidden;
      border:1px solid #4a4f58;
      box-shadow:0 8px 20px rgba(0,0,0,.4);
      background:#1f2024;
      display:flex;
      align-items:center;
      justify-content:center;
      max-height:220px;
      flex-shrink:0;
    }
    .top-image-wrap img{
      display:block;
      width:100%;
      height:100%;
      object-fit:cover;
    }

    details.image-credit{
      width:100%;
      max-width:360px;
      background:#2f323a;
      border:1px solid #4a4f58;
      border-radius:8px;
      padding:.5rem .6rem;
      color:var(--muted);
      text-align:left;
      font-size:.8rem;
      line-height:1.4;
      box-shadow:0 6px 16px rgba(0,0,0,.35);
      max-height:120px;
      overflow:auto;
      flex-shrink:0;
    }
    details.image-credit summary{
      cursor:pointer;
      color:#e9eef7;
      font-weight:600;
      outline:none;
      list-style:none;
      font-size:.8rem;
    }
    details.image-credit summary::-webkit-details-marker{display:none}
    .credit-desc{
      margin-bottom:.4rem;
      font-size:.75rem;
      line-height:1.4;
      color:#d5d5d5;
    }
    .credit-url{
      font-size:.7rem;
      color:#d5d5d5;
      line-height:1.4;
      word-break:break-all;
    }
    .credit-url code{
      color:#cfe2ff;
      font-size:.7rem;
    }

    /* ===== BIAS BUSTER ===== */
    .progress-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.75rem;
      margin-bottom:.5rem;
      width:100%;
      max-width:760px;
      text-align:left;
    }
    .topic-label{
      font-size:1rem;
      color:var(--muted);
      text-align:left;
    }
    .progress-bar-wrap{
      flex:1;
      height:8px;
      background:#3a3d46;
      border-radius:5px;
      overflow:hidden;
    }
    #progress-bar{
      height:100%;
      width:0%;
      background:var(--accent);
      transition:width .25s ease;
    }
    .meta-row{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      margin:.4rem 0 .7rem;
      color:var(--muted);
      width:100%;
      max-width:760px;
    }
    #progress{
      font-weight:600;
    }

    #answer-history{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:.5rem;
      margin-bottom:.8rem;
      width:100%;
      max-width:760px;
      text-align:left;
      flex-shrink:0;
    }

    .box{
      min-height:64px;
      background:var(--tile);
      border:1px solid var(--tile-border);
      border-radius:12px;
      display:flex;
      flex-direction:column;
      gap:.5rem;
      align-items:flex-start;
      justify-content:flex-start;
      box-shadow:0 2px 0 #cfcfcf;
      padding:.6rem .7rem .7rem .7rem;
      color:#202020;
      text-align:left;
      font-size:1rem;
      line-height:1.4;
    }
    .box.correct{
      border-color:#28a745;
      background:var(--green-bg);
      color:#155724;
    }
    .box.incorrect{
      border-color:#dc3545;
      background:var(--red-bg);
      color:#721c24;
    }

    .box-img-wrap{
      width:100%;
      border-radius:8px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.15);
      background:#fff;
    }
    .box-img-wrap img{
      display:block;
      width:100%;
      height:auto;
      object-fit:cover;
    }

    .box .src{
      font-size:.9rem;
      opacity:.85;
      line-height:1.4;
    }
    .box .src a{
      color:var(--link-bias);
      text-decoration:underline;
    }

    #headline-image-wrap{
      width:220px;
      max-width:220px;
      border-radius:10px;
      overflow:hidden;
      border:1px solid #4a4f58;
      box-shadow:0 8px 20px rgba(0,0,0,.4);
      background:#1f2024;
      display:flex;
      align-items:center;
      justify-content:center;
      max-height:140px;
      flex-shrink:0;
      margin-bottom:1rem;
    }
    #headline-image{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    #headline{
      background:var(--tile);
      color:#111;
      padding:1.1rem 1rem;
      border-radius:14px;
      border:1px solid var(--tile-border);
      box-shadow:0 2px 0 #cfcfcf;
      margin:.2rem 0 1rem;
      min-height:3.8rem;
      font-size:1.2rem;
      line-height:1.35;
      text-align:center;
      width:100%;
      max-width:760px;
      flex-shrink:0;
    }

    .options{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:.6rem;
      margin:.2rem 0 0;
      width:100%;
      max-width:760px;
      flex-shrink:0;
    }
    .option-btn{
      background:var(--tile);
      color:#111;
      padding:.9rem .8rem;
      border-radius:12px;
      border:1px solid var(--tile-border);
      cursor:pointer;
      transition:transform .06s ease,background .15s ease;
      box-shadow:0 2px 0 #cfcfcf;
      font-weight:600;
      text-align:center;
      font-size:1rem;
    }
    .option-btn:hover{
      background:#ededed;
      transform:translateY(-1px);
    }

    /* Timeline */
    .tl-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.75rem;
      flex-wrap:wrap;
      width:100%;
      max-width:760px;
      text-align:left;
    }
    .lives{
      color:#ffb3b3;
      font-weight:600;
      font-size:1rem;
    }
    .event-list{
      display:flex;
      flex-direction:column;
      gap:.6rem;
      list-style:none;
      margin:.8rem 0 0;
      width:100%;
      max-width:760px;
      text-align:left;
      flex-shrink:0;
    }
    .event{
      background:#34363d;
      border:1px solid #4a4f58;
      border-radius:12px;
      width:100%;
      min-height:70px;
      cursor:grab;
      user-select:none;
      display:flex;
      align-items:flex-start;
      justify-content:flex-start;
      padding:.7rem .8rem;
      text-align:left;
      color:#e9eef7;
      line-height:1.35;
      white-space:normal;
      word-break:break-word;
      transition:transform .12s ease,box-shadow .12s ease,background .12s ease;
      font-size:1rem;
    }
    .event:hover{transform:translateY(-2px)}
    .event.dragging{opacity:.8}
    .event.correct{
      border-color:#28a745;
      box-shadow:0 0 0 2px rgba(40,167,69,.25) inset;
    }
    .event.incorrect{
      border-color:#dc3545;
      box-shadow:0 0 0 2px rgba(220,53,69,.25) inset;
    }

    .tl-actions{
      display:flex;
      gap:.6rem;
      flex-wrap:wrap;
      justify-content:center;
      margin-top:.8rem;
      width:100%;
      max-width:760px;
      flex-shrink:0;
    }
    .score{
      margin-top:.4rem;
      color:var(--muted);
      text-align:center;
      width:100%;
      max-width:760px;
      font-size:1rem;
      flex-shrink:0;
    }

    .final-big{
      font-size:1.3rem;
      margin-bottom:.25rem;
      text-align:center;
    }
    .final-sub{
      color:#e9eef7;
      margin:.25rem 0 .6rem;
      text-align:center;
      font-size:1rem;
      line-height:1.4;
    }

    /* Mobile fallback */
    @media(max-width:700px){
      body{overflow:auto;}
      .card{max-height:none;overflow:auto;}
      #summary.card{
        flex-direction:column;
        align-items:flex-start;
        justify-content:flex-start;
        max-height:none;
        overflow:auto;
      }
      .summary-divider{display:none;}
      .summary-right{
        width:100%;
        max-width:360px;
      }
      .top-image-wrap{
        max-width:360px;
        max-height:none;
      }
      details.image-credit{
        max-width:360px;
      }
    }
  </style>
</head>
<body>
  <div class="center">
    <main class="screen" aria-live="polite">

      <!-- Brand -->
      <div class="brand">
        <img src="nextelect-logo.png" alt="NextElect Logo"/>
        <h1 class="logo">NextElect ‚Äî Issue of the Week</h1>
      </div>

      <!-- HOME: choose one of three issues -->
      <section id="home" class="card center-text">
        <h2 class="home-title">Welcome to NextElect</h2>
        <p class="muted">Your weekly, unbiased practice on news reading.</p>
        <ol class="instructions">
          <li>Read a short, neutral overview of this week‚Äôs issue.</li>
          <li>Play Bias Buster: identify the framing (Left, Center, Right) for 3 headlines.</li>
          <li>Put 5 key events in correct order. You have 3 lives.</li>
        </ol>

        <p class="muted" style="margin-top:.9rem;">Pick an issue to play:</p>
        <div class="issue-grid">
          <button class="issue-card" data-issue="issue1">
            <div class="issue-card-title">Issue 1: Big Night for Democrats</div>
            <div class="issue-card-date">10/16/2025</div>
            <div class="issue-card-desc">Democrats dominate 2025 elections.</div>
          </button>
          <button class="issue-card" data-issue="issue2">
            <div class="issue-card-title">Issue 2: NYC Mayoral Election</div>
            <div class="issue-card-date">10/09/2025</div>
            <div class="issue-card-desc">Zohran Mamdani wins New York Mayoral Election.</div>
          </button>
          <button class="issue-card" data-issue="issue3">
            <div class="issue-card-title">Issue 3: Prop 50 Passes</div>
            <div class="issue-card-date">10/02/2025</div>
            <div class="issue-card-desc">California ballot measure, Prop 50, passes.</div>
          </button>
        </div>
      </section>

      <!-- SUMMARY -->
      <section id="summary" class="card section hidden">
        <div class="summary-left">
          <div class="summary-header-row">
            <img src="nextelect-logo.png" alt="NextElect Logo"/>
            <h2>Part 1 ¬∑ Summary</h2>
          </div>

          <div id="issue-title" class="summary-title"></div>

          <ul id="issue-summary" class="summary-bullets"></ul>

          <div class="summary-cta">
            <button id="to-bias" class="btn">Start Playing</button>
          </div>
        </div>

        <div class="summary-divider"></div>

        <div class="summary-right">
          <div class="top-image-wrap" id="issue-image-wrap">
            <img id="issue-image" src="" alt="Issue image preview"/>
          </div>

          <details id="issue-image-credit" class="image-credit hidden">
            <summary>Image credit / source</summary>
            <div>
              <div id="issue-image-credit-desc" class="credit-desc"></div>
              <div class="credit-url">
                URL: <code id="issue-image-credit-url"></code>
              </div>
            </div>
          </details>
        </div>
      </section>

      <!-- BIAS BUSTER -->
      <section id="bias" class="card section hidden">
        <div id="headline-image-wrap" class="hidden">
          <img id="headline-image" src="" alt="Headline image preview"/>
        </div>

        <div class="progress-top">
          <div id="topic-label" class="topic-label">Part 2 ¬∑ Bias Buster</div>
          <div class="progress-bar-wrap"><div id="progress-bar"></div></div>
        </div>

        <div class="meta-row">
          <div id="progress">0 / 3</div>
        </div>

        <div id="answer-history"></div>

        <div id="headline"></div>

        <div class="options">
          <button class="option-btn" data-choice="left">Left</button>
          <button class="option-btn" data-choice="center">Center</button>
          <button class="option-btn" data-choice="right">Right</button>
        </div>
      </section>

      <!-- TIMELINE -->
      <section id="timeline" class="card section hidden">
        <div class="tl-head">
          <h2>Part 3 ¬∑ Timeline (earliest ‚Üí latest)</h2>
          <div class="lives" id="lives"></div>
        </div>

        <ul id="event-list" class="event-list"></ul>

        <div class="tl-actions">
          <button id="check-order" class="btn small">Check Order</button>
          <button id="reset-order" class="btn small">Reset</button>
          <button id="reshuffle" class="btn small">Reshuffle</button>
          <button id="reveal" class="btn small">Reveal</button>
          <button id="to-final-after-reveal" class="btn small hidden">Go to Results</button>
        </div>

        <p id="tl-score" class="score"></p>
      </section>

      <!-- FINAL -->
      <section id="final" class="card section hidden">
        <h2 class="final-big">Final Results</h2>
        <p id="final-line" class="final-sub"></p>
      </section>

    </main>
  </div>

  <!-- Floating Sources & Links button -->
  <button id="fab-sources" class="side-fab hidden" aria-label="Sources & Links">üîó</button>

  <!-- Sources & Links Modal -->
  <div id="sources-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <button id="sources-close" class="close-x" aria-label="Close">√ó</button>
      <h3>Sources & Links</h3>
      <p class="muted" style="margin:.25rem 0 .5rem">
        These are the articles used in Bias Buster for the issue you just played. The checkmarks show where you matched the bias label.
      </p>
      <div id="final-sources" style="margin:.4rem 0 .6rem"></div>
      <hr style="border:0;border-top:1px solid #4a4f58;margin:.6rem 0">
      <p class="muted" style="margin-bottom:.35rem;">
        Want to go deeper on bias and media literacy? These sites are good starting points:
      </p>
      <div class="links-list">
        <p><a href="https://redbluedictionary.org" target="_blank" rel="noopener">Red/Blue Dictionary ‚Äî how different groups define the same terms</a></p>
        <p><a href="https://www.allsides.com" target="_blank" rel="noopener">AllSides ‚Äî outlet bias ratings and side-by-side coverage</a></p>
        <p><a href="https://ground.news" target="_blank" rel="noopener">Ground News ‚Äî compare headlines and framing across outlets</a></p>
        <p><a href="https://mediabiasfactcheck.com" target="_blank" rel="noopener">Media Bias/Fact Check ‚Äî bias and factual-reporting scores</a></p>
      </div>
    </div>
  </div>

  <script>
    /* =========================
       THREE ISSUES CONFIG
       ========================= */
    const ISSUES = {
      issue1: {
        dateLabel: "10/16/2025",
        issueImage: "https://img.allsides.com/sites/default/files/c-2025-11-05t042146z-1757593477.jpg",
        issueImageCreditDesc: "Associated Press / White House construction photo (Oct 2025).",
        issue: {
          title: "Big Night for Democrats",
          summaryBullets: [
            "Democrats won most of the nation‚Äôs most-watched elections on Tuesday, which many media outlets framed as a referendum on President Donald Trump‚Äôs second term so far.",
            "New York City: Self-described democratic socialist Zohran Mamdani (D) made history as the city's first Muslim mayor, defeating former Governor Andrew Cuomo (I) and Republican Curtis Sliwa (R). Mamdani won with 50.4% of the vote. President Trump had endorsed Cuomo, who received 41.6% of the vote.",
            "California: Voters approved Proposition 50, a measure backed by Governor Gavin Newsom (D), which will temporarily establish new congressional district maps. The maps are expected to create up to five additional Democrat-controlled seats in the US House."
          ]
        },
        biasRound: [
          {
            text: "Democrats sweep first major elections of second Trump term",
            answer: "center",
            author: "Reuters",
            url: "https://www.reuters.com/world/us/elections-new-york-new-jersey-virginia-offer-early-test-trumps-agenda-2025-11-04/",
            image: "https://example.com/ethics-questions.jpg"
          },
          {
            text: "Takeaways from Tuesday‚Äôs elections: Democrats win across the spectrum as voters reject Trump",
            answer: "left",
            author: "CNN",
            url: "https://edition.cnn.com/2025/11/04/politics/election-takeaways-new-york-new-jersey-virginia",
            image: "https://media.cnn.com/api/v1/images/stellar/prod/ap25308638680229.jpg?c=original&q=w_1316,c_fill/f_webp"
          },
          {
            text: "The Night America Chose Chaos Over Clarity",
            answer: "right",
            author: "Townhal",
            url: "https://townhall.com/columnists/kevinmccullough/2025/11/05/the-night-america-chose-chaos-over-clarity-n2665966",
            image: "https://media.townhall.com/cdn/hodl/2025/309/8dafa99a-285c-4a63-9dcf-e7b033d05fa7-1052x615.jpeg"
          }
        ],
        timelineEvents: [
          { id: 1, text: "Abigail Spanberger is projected to win the Virginia gubernatorial election" },
          { id: 2, text: "Mikie Sherill is projected to be the next governor of New Jersey" },
          { id: 3, text: "Zohran Mamdani wins the NYC Mayoral Race" },
          { id: 4, text: "California ballot measure Prop 50 passes" },
          { id: 5, text: "Trump cites the government shutdown as a reason for the negative results" }
        ],
        timelineLives: 3
      },

      /* You can edit Issue 2 & 3 content however you want.
         Structure is the same: dateLabel, issueImage, issue, biasRound, timelineEvents, timelineLives. */

      issue2: {
        dateLabel: "10/09/2025",
        issueImage: "data:image/jpeg;base64,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",
        issueImageCreditDesc: "From The Guardian",
        issue: {
          title: "New York Mayoral Race",
          summaryBullets: [
            "Zohran Mamdani was elected the next mayor of New York City in Tuesday‚Äôs election, beating President Donald Trump‚Äôs endorsed candidate Andrew Cuomo and Republican Curtis Sliwa.",
            "The Details: Mamdani will be the first Muslim mayor of New York City as well as the first mayor of South Asian descent. He will also be the youngest mayor in over a century, according to NPR (Lean Left bias). Mamdani ran on a platform of eliminating bus fares, freezing stabilized rents, and raising taxes on the wealthy and large corporations.",
            "For Context: Trump has threatened to withhold federal funds from New York City if Mamdani were to become mayor and has labeled him his ‚Äúlittle communist.‚Äù Over 2 million voters came to the polls, resulting in the highest voter turnout for a mayoral election in over 50 years."
          ]
        },
        biasRound: [
          {
            text: "Mamdani wins New York City mayoral race, in a historic victory for progressives",
            answer: "left",
            author: "NPR",
            url: "https://www.npr.org/2025/11/04/nx-s1-5597788/election-results-zohran-mamdani-new-york-city-mayor",
            image: "https://npr.brightspotcdn.com/dims3/default/strip/false/crop/6684x4454+666+1882/resize/2400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F98%2F71%2F852ce7e04ccd8d36ad47c0ffee13%2F20251104-mamdanielectionnight-kc-37.jpg"
          },
          {
            text: "Socialist shockwave: Zohran Mamdani stuns NYC as voters hand power to Democrats‚Äô far-left flank",
            answer: "right",
            author: "Fox News",
            url: "https://www.foxnews.com/politics/socialist-shockwave-zohran-mamdani-stuns-nyc-voters-hand-power-democrats-far-left-flank",
            image: "https://example.com/agency-gavel.jpg"
          },
          {
            text: "'Mandate for change': Zohran Mamdani wins New York City mayoral election",
            answer: "center",
            author: "BBC",
            url: "https://www.bbc.com/news/articles/ceq01l8reqlo",
            image: "https://example.com/neutral-court.jpg"
          }
        ],
        timelineEvents: [
          { id: 1, text: "Zohran Mamdani announces candidacy for New York Mayor" },
          { id: 2, text: "Mamdani upsets Andrew Cuomo in NYC Mayor Democratic Primary" },
          { id: 3, text: "Mamdani, Cuomo, and Sliwa spar in the NYC Mayoral debate" },
          { id: 4, text: "Mamdani wins NYC Mayoral Election" },
          { id: 5, text: "Mayor-elect Zohran Mamdani calls out Donald Trump in victory speech" }
        ],
        timelineLives: 3
      },

      issue3: {
        dateLabel: "10/02/2025",
        issueImage: "https://example.com/leaks-press.jpg",
        issueImageCreditDesc: "Stock photo of microphones and reporters outside a government building.",
        issue: {
          title: "Proposition 50 passes in California",
          summaryBullets: [
            "Voters in California have approved Proposition 50 (Prop 50), the redistricting plan backed by Democrat Governor Gavin Newsom.",
            "The Details: As of Tuesday night, more than 64% of voters were in favor of the proposal, which will allow California to replace the current boundaries drawn by the state's independent Citizens Redistricting Commission and to adopt a new congressional map. This map will give Democrats the chance to flip several Republican seats as they seek to gain a majority in the U.S. House after mid-term elections in 2026. The seats that could turn to Democrats include seats in Districts 1, 2, and 3, as well as other swing districts in California.",
            "For Context: The redistricting push in California was in response to the move in Texas to redraw their congressional map to favor Republicans. The success of Prop 50 could be a boost for Newsom as he considers a potential 2028 presidential run."
          ]
        },
        biasRound: [
          {
            text: "What Does Prop 50 Do? How New California Map Gives Democrats Big Advantage",
            answer: "center",
            author: "Newsweek",
            url: "https://www.newsweek.com/prop-50-new-california-map-democrat-advantage-newsom-republican-trump-10994817",
            image: "https://example.com/leak-hunt.jpg"
          },
          {
            text: "California Prop 50 passes by wide margin in clear rebuke of Trump",
            answer: "left",
            author: "San Francisco Chronicle",
            url: "https://www.sfchronicle.com/politics/article/california-prop-50-results-21125627.php",
            image: "https://s.hdnux.com/photos/01/55/02/20/28582964/3/ratio3x2_960.webp"
          },
          {
            text: "Californians Approve Redrawn House Map, Further Advantaging Democrats in Deep-Blue State",
            answer: "right",
            author: "National Review",
            url: "https://www.nationalreview.com/news/californians-approve-redrawn-house-map-further-advantaging-democrats-in-deep-blue-state/",
            image: "https://i0.wp.com/www.nationalreview.com/wp-content/uploads/2025/11/prop-50-newsom.jpg?w=1054&ssl=1"
          }
        ],
        timelineEvents: [
          { id: 1, text: "Texas approves redrawing of Congressional map" },
          { id: 2, text: "Gavin Newsom leads the charge for Prop 50, which would allow California to adopt a new congressional map" },
          { id: 3, text: "Prop 50 passes with 64% of citizens voting yes" },
          { id: 4, text: "Gavin Newsom says that California 'stood tall'"},
          { id: 5, text: "News outlets publish conflicting stories about the proposition" }
        ],
        timelineLives: 3
      }
    };

    /* Current issue state */
    let CURRENT = null;

    /* Helpers */
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    const esc = (s) => (s||"").replace(/[&<>"']/g, m => (
      {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]
    ));
    const cap = (s) => s ? s[0].toUpperCase() + s.slice(1) : s;

    function showOnly(id){
      ['home','summary','bias','timeline','final'].forEach(x => $('#'+x).classList.add('hidden'));
      $('#'+id).classList.remove('hidden');
      window.scrollTo({top:0,left:0,behavior:'instant'});
    }

    /* ========= ISSUE SELECTION (HOME ‚Üí SUMMARY) ========= */
    function loadSummaryForCurrent(){
      if(!CURRENT) return;
      $('#issue-title').textContent = `${CURRENT.dateLabel} ¬∑ ${CURRENT.issue.title}`;

      const list = $('#issue-summary');
      list.innerHTML = '';
      CURRENT.issue.summaryBullets.forEach(b => {
        const li = document.createElement('li');
        li.textContent = b;
        list.appendChild(li);
      });

      if (CURRENT.issueImage && CURRENT.issueImage.trim() !== "") {
        $('#issue-image').src = CURRENT.issueImage;
        $('#issue-image').alt = CURRENT.issue.title || "Issue image";
        $('#issue-image-wrap').classList.remove('hidden');

        $('#issue-image-credit-desc').textContent = CURRENT.issueImageCreditDesc || "";
        $('#issue-image-credit-url').textContent = CURRENT.issueImage;
        $('#issue-image-credit').classList.remove('hidden');
      } else {
        $('#issue-image-wrap').classList.add('hidden');
        $('#issue-image-credit').classList.add('hidden');
      }
    }

    $$('.issue-card').forEach(btn => {
      btn.addEventListener('click', () => {
        const key = btn.dataset.issue;
        CURRENT = ISSUES[key];
        loadSummaryForCurrent();
        showOnly('summary');
      });
    });

    /* ========= SUMMARY ‚Üí BIAS ========= */
    $('#to-bias').addEventListener('click', () => {
      initBias();
      showOnly('bias');
    });

    /* ========= BIAS BUSTER ========= */
    const TOTAL = 3;
    let bbIndex = 0;
    let bbAnswered = 0;
    let bbScore = 0;

    function initBias(){
      if(!CURRENT) return;
      bbIndex = 0;
      bbAnswered = 0;
      bbScore = 0;

      $('#topic-label').textContent = "Part 2 ¬∑ Bias Buster";
      $('#progress-bar').style.width = '0%';
      $('#progress').textContent = `0 / ${TOTAL}`;
      $('#answer-history').innerHTML = '';
      $('#headline-image-wrap').classList.add('hidden');

      showBBQuestion();
    }

    function showBBQuestion(){
      const q = CURRENT.biasRound[bbIndex];

      $('#headline').textContent = q.text;

      if (q.image && q.image.trim() !== "") {
        $('#headline-image').src = q.image;
        $('#headline-image').alt = q.text;
        $('#headline-image-wrap').classList.remove('hidden');
      } else {
        $('#headline-image-wrap').classList.add('hidden');
      }

      $$('.option-btn').forEach(b => b.disabled = false);
    }

    function appendHistory(correct, item){
      const box = document.createElement('div');
      box.className = 'box ' + (correct ? 'correct' : 'incorrect');
      const status = correct ? '‚úÖ Correct' : '‚ùå Correct bias';

      const imgHTML = (item.image && item.image.trim() !== "")
        ? `<div class="box-img-wrap"><img src="${esc(item.image)}" alt="${esc(item.text)}"></div>`
        : '';

      box.innerHTML = `
        ${imgHTML}
        <div><strong>${status}:</strong> ${cap(item.answer)}</div>
        <div class="src">
          Source: ${esc(item.author||'')}
          ${item.url ? ` ‚Ä¢ <a href="${esc(item.url)}" target="_blank" rel="noopener">Open</a>` : ''}
        </div>
      `;
      $('#answer-history').appendChild(box);
    }

    function handleBias(choice){
      const q = CURRENT.biasRound[bbIndex];

      $$('.option-btn').forEach(b => b.disabled = true);

      const correct = (choice === q.answer);
      if(correct) bbScore++;

      appendHistory(correct, q);

      bbAnswered++;
      $('#progress').textContent = `${bbAnswered} / ${TOTAL}`;
      $('#progress-bar').style.width = `${(bbAnswered/TOTAL)*100}%`;

      setTimeout(() => {
        bbIndex++;
        if (bbIndex < TOTAL){
          showBBQuestion();
        } else {
          initTimeline();
          showOnly('timeline');
        }
      }, 450);
    }

    $$('.option-btn').forEach(btn => {
      btn.addEventListener('click', () => handleBias(btn.dataset.choice));
    });

    /* ========= TIMELINE ========= */
    let lives = 0;
    let startLayout = [];

    function hearts(n){
      return '‚ù§Ô∏è'.repeat(Math.max(0,n));
    }
    function updateLives(){
      $('#lives').innerHTML = `Lives: ${lives} ${hearts(lives)}`;
    }

    function initTimeline(){
      if(!CURRENT) return;
      lives = CURRENT.timelineLives;
      updateLives();
      buildTimeline(shuffle([...CURRENT.timelineEvents]));
      $('#tl-score').textContent = '';
      $('#to-final-after-reveal').classList.add('hidden');
    }

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function buildTimeline(items){
      const list = $('#event-list');
      list.innerHTML = '';
      items.forEach(ev => {
        const li = document.createElement('li');
        li.className = 'event';
        li.draggable = true;
        li.dataset.id = ev.id;
        li.innerHTML = `
          <div style="display:flex;gap:.55rem;align-items:flex-start">
            <div style="opacity:.7">‚ò∞</div>
            <div class="event-text">${esc(ev.text)}</div>
          </div>
        `;
        list.appendChild(li);
      });
      startLayout = currentIds();
      wireDnDVertical();
    }

    function currentIds(){
      return $$('#event-list .event').map(n => parseInt(n.dataset.id,10));
    }
    function correctIds(){
      return [...CURRENT.timelineEvents]
        .sort((a,b)=>a.id - b.id)
        .map(e => e.id);
    }

    function scoreTimeline({reveal=false} = {}){
      const order = currentIds();
      const correct = correctIds();

      let hits = 0;
      $$('#event-list .event').forEach((n,i) => {
        const ok = order[i] === correct[i];
        if(ok) hits++;
        n.classList.toggle('correct', ok);
        n.classList.toggle('incorrect', !ok && !reveal);
      });

      const total = correct.length;
      const pct = Math.round((hits/total)*100);

      $('#tl-score').textContent = reveal
        ? `Correct order shown. (Last attempt: ${hits}/${total})`
        : `You placed ${hits} of ${total} correctly (${pct}%). Lives left: ${lives}`;

      return hits === total;
    }

    function wireDnDVertical(){
      const list = $('#event-list');
      let dragging = null;

      $$('#event-list .event').forEach(el => {
        el.addEventListener('dragstart', e => {
          dragging = el;
          el.classList.add('dragging');
          e.dataTransfer.effectAllowed = 'move';
          e.dataTransfer.setData('text/plain', el.dataset.id);

          $$('#event-list .event').forEach(n => n.classList.remove('correct','incorrect'));
        });

        el.addEventListener('dragend', () => {
          if(dragging){
            dragging.classList.remove('dragging');
            dragging = null;
          }
        });
      });

      list.addEventListener('dragover', e => {
        e.preventDefault();
        if(!dragging) return;

        const after = closestVertical(list, e.clientY, dragging);
        if(after == null){
          list.appendChild(dragging);
        } else {
          list.insertBefore(dragging, after);
        }
      });

      list.addEventListener('drop', e => e.preventDefault());
    }

    function closestVertical(container, y, ignore){
      const els = [...container.querySelectorAll('.event')].filter(n => n !== ignore);
      if(els.length === 0) return null;

      let best = {el:null, d:Infinity};
      for(const el of els){
        const r = el.getBoundingClientRect();
        const cy = r.top + r.height/2;
        const d = Math.abs(y - cy);
        if(d < best.d){
          best = {el, d};
        }
      }
      if(!best.el) return null;

      const r = best.el.getBoundingClientRect();
      const after = y > (r.top + r.height/2);
      return after ? best.el.nextSibling : best.el;
    }

    // Check order
    $('#check-order').addEventListener('click', () => {
      const win = scoreTimeline({reveal:false});
      if(win){
        goFinal();
        return;
      }

      lives--;
      updateLives();

      if(lives <= 0){
        $('#tl-score').textContent = "Out of lives. Showing correct order, then taking you to results‚Ä¶";
        revealOrder(true);
        setTimeout(() => goFinal(), 900);
      } else {
        $('#tl-score').textContent += " ¬∑ Try again.";
      }
    });

    function revealOrder(fromLoss=false){
      const ordered = [...CURRENT.timelineEvents].sort((a,b)=>a.id - b.id);
      buildTimeline(ordered);
      scoreTimeline({reveal:true});

      if(!fromLoss){
        $('#to-final-after-reveal').classList.remove('hidden');
        $('#tl-score').textContent = "Here's the correct order. Ready to see your results?";
      }
    }

    $('#reveal').addEventListener('click', () => revealOrder(false));
    $('#to-final-after-reveal').addEventListener('click', () => goFinal());

    $('#reshuffle').addEventListener('click', () => {
      buildTimeline(shuffle([...CURRENT.timelineEvents]));
      $('#tl-score').textContent = '';
      $('#to-final-after-reveal').classList.add('hidden');
    });

    $('#reset-order').addEventListener('click', () => {
      const byId = Object.fromEntries(CURRENT.timelineEvents.map(e => [e.id, e]));
      const items = startLayout.map(id => byId[id]);
      buildTimeline(items);
      $('#tl-score').textContent = '';
      $('#to-final-after-reveal').classList.add('hidden');
    });

    /* ========= FINAL ========= */
    function goFinal(){
      const livesLeft = Math.max(0, lives);
      const finalScore = bbScore + livesLeft;
      const biasPart = `${bbScore}/3`;
      const livesPart = `${livesLeft}/3`;

      let msg;
      if(finalScore === 6){
        msg = `üî• Outstanding! Score ${finalScore}/6 ‚Äî Perfect balance of bias spotting (${biasPart}) and timeline recall (${livesPart}).`;
      } else if(finalScore >= 5){
        msg = `üí™ Strong work! Score ${finalScore}/6 ‚Äî Bias: ${biasPart}. Lives: ${livesPart}. So close to perfect.`;
      } else if(finalScore >= 3){
        msg = `üëç Solid start. Score ${finalScore}/6 ‚Äî Bias: ${biasPart}. Lives: ${livesPart}. A couple tweaks and you‚Äôll nail it.`;
      } else {
        msg = `üîÅ Keep going. Score ${finalScore}/6 ‚Äî Bias: ${biasPart}. Lives: ${livesPart}. Recheck the summary and try again.`;
      }
      $('#final-line').textContent = msg;

      // Fill modal content with current issue's sources
      const fs = $('#final-sources');
      fs.innerHTML = '';
      CURRENT.biasRound.forEach((item, i) => {
        const hist = $$('#answer-history .box')[i];
        const gotIt = hist ? hist.classList.contains('correct') : false;
        const row = document.createElement('div');
        row.className = 'src-row';
        row.innerHTML = `${gotIt ? '‚úÖ' : '‚ùå'} ${esc(item.text)}<br>
          <small>Bias: ${cap(item.answer)} ¬∑ Source: ${esc(item.author||'')}${
            item.url ? ` ¬∑ <a href="${esc(item.url)}" target="_blank" rel="noopener">Open</a>` : ''
          }</small>`;
        fs.appendChild(row);
      });

      showOnly('final');
      $('#fab-sources').classList.remove('hidden');
    }

    // Floating Sources button / modal
    const fab = $('#fab-sources');
    const modal = $('#sources-modal');
    const closeBtn = $('#sources-close');

    fab.addEventListener('click', () => modal.classList.remove('hidden'));
    closeBtn.addEventListener('click', () => modal.classList.add('hidden'));
    modal.addEventListener('click', (e) => {
      if(e.target === modal) modal.classList.add('hidden');
    });
  </script>
</body>
</html>
